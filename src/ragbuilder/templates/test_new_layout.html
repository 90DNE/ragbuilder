<!DOCTYPE html>
<html lang="en">
<head>
    <meta charset="UTF-8">
    <meta name="viewport" content="width=device-width, initial-scale=1.0">
    <title>RAG Configuration</title>
    <!-- Bootstrap CSS -->
    <link href="https://cdn.jsdelivr.net/npm/bootstrap@5.1.3/dist/css/bootstrap.min.css" rel="stylesheet">
    <!-- Font Awesome -->
    <link href="https://cdnjs.cloudflare.com/ajax/libs/font-awesome/6.0.0/css/all.min.css" rel="stylesheet"/>
    <link href="https://cdnjs.cloudflare.com/ajax/libs/noUiSlider/15.8.1/nouislider.min.css" rel="stylesheet">
    <!-- MDB -->
    <link href="https://cdnjs.cloudflare.com/ajax/libs/mdb-ui-kit/7.3.2/mdb.min.css" rel="stylesheet"/>
    <style>
        .h6 { font-weight: bold; }
        .chevron-icon {
            cursor: pointer;
            transition: transform 0.2s ease;
        }
        .collapsed .chevron-icon {
            transform: rotate(90deg);
        }
        .treeview ul {
            list-style: none;
            padding-left: 10;
        }
        .treeview-category {
            color: inherit; 
            text-decoration: none; /* Remove the underline */
        }

        .treeview-category:hover {
            color: inherit; 
        }
        .noUi-connect {
            background: #e0e0e0;
        }
        .noUi-target {
            height: 10px;
            width: 330px;
        }
        .noUi-horizontal .noUi-handle{
            width:34px;
            height:24px;
            right:-17px;
            top:-8px;
            border:1px solid #D9D9D9;
            border-radius:12px;
            background:#FFF;
            cursor:default;
        }
    </style>
</head>
<body>
  <div class="container mt-5">
    <div id="step2" class="container-fluid">
      <h5>Detailed RAG parameters</h5>
      <p class="mt-3">
        To tailor your RAG configurations, you can unselect any specific options
        you wish to exclude. For best results, leave all settings unchanged and click "Next."
      </p>
      <div class="row row-cols-2">
            <div class="col-md-6 mt-3">
                <div class="treeview treeview-primary" data-mdb-selectable="true">
                    <ul role="tree">
                        <li aria-level="1" role="tree-item">
                            <a class="treeview-category h6" data-mdb-collapse-init data-mdb-target="#chunking-strategy" role="button" aria-expanded="true">
                                <i class="fas fa-angle-right chevron-icon mx-1"></i>
                                <input type="checkbox" class="mx-1 form-check-input" id="chunkingStrategy" checked>
                                Chunking Strategy
                            </a>
                            <ul class="collapse show" id="chunking-strategy" role="group">
                                <li aria-level="2" role="tree-item" class="treeview-category">
                                    <input type="checkbox" class="mx-1 form-check-input" id="markdown" checked> Markdown
                                </li>
                                <li aria-level="2" role="tree-item" class="treeview-category">
                                    <input type="checkbox" class="mx-1 form-check-input" id="html" checked> HTML
                                </li>
                                <li aria-level="2" role="tree-item" class="treeview-category">
                                    <input type="checkbox" class="mx-1 form-check-input" id="semantic" checked> Semantic
                                </li>
                                <li aria-level="2" role="tree-item" class="treeview-category">
                                    <input type="checkbox" class="mx-1 form-check-input" id="recursive" checked> Recursive
                                </li>
                                <li aria-level="2" role="tree-item" class="treeview-category">
                                    <input type="checkbox" class="mx-1 form-check-input" id="character" checked> Character
                                </li>
                            </ul>
                        </li>
                    </ul>
                </div>
            </div>

            <div class="col-md-6 mt-3 pt-1">
                <h6 class="h6">Chunk Size</h6>
                <br>
                    <div id="multi-ranges-basic"></div>
                    <div id="multi-ranges-basic-value" class="mt-3 d-flex justify-content-between">
                    <span>Min: <span id="minValue">500</span></span>
                    <span class="me-5">Max: <span id="maxValue">2000</span></span>
                    </div>
            </div>
      
            <div class="col-md-6 mt-3">
                <div class="treeview treeview-primary" data-mdb-selectable="true">
                    <ul role="tree">
                        <li aria-level="1" role="tree-item">
                            <a class="treeview-category h6" data-mdb-collapse-init data-mdb-target="#embedding-model" role="button" aria-expanded="true">
                                <i class="fas fa-angle-right chevron-icon mx-1"></i>
                                <input type="checkbox" class="mx-1 form-check-input h6" id="embeddingModel" unchecked>
                                Embedding Model
                            </a>
                            <ul class="collapse show" id="embedding-model" role="group">
                                <li aria-level="2" role="tree-item">
                                    <a class="treeview-category d-flex align-items-center" data-mdb-collapse-init data-mdb-target="#openai-models" role="button" aria-expanded="true">
                                        <i class="fas fa-angle-right chevron-icon mx-1"></i>
                                        <input type="checkbox" class="mx-1 form-check-input" id="openAI">
                                        OpenAI
                                    </a>
                                    <ul class="collapse show" id="openai-models" role="group">
                                        <li aria-level="3" role="tree-item" class="treeview-category">
                                            <input type="checkbox" class="mx-1 form-check-input" id="embeddingSmall" unchecked> text-embedding-3-small
                                        </li>
                                        <li aria-level="3" role="tree-item" class="treeview-category">
                                            <input type="checkbox" class="mx-1 form-check-input" id="embeddingLarge" checked> text-embedding-3-large
                                        </li>
                                        <li aria-level="3" role="tree-item" class="treeview-category">
                                            <input type="checkbox" class="mx-1 form-check-input" id="embeddingAda" unchecked> text-embedding-ada-002
                                        </li>
                                    </ul>
                                </li>
                                <li aria-level="2" role="tree-item" class="treeview-category mx-3">
                                    <input type="checkbox" class="mx-1 form-check-input" id="embeddingHuggingFace" unchecked> HuggingFace
                                </li>
                                <div class="form-group row mx-3" id="embeddingHuggingFaceModelDiv" style="display: none;">
                                    <label for="embeddingHuggingFaceModel" class="col-sm-2 col-form-label">Model:</label>
                                    <div class="col-sm-10">
                                        <input type="text" class="form-control" id="embeddingHuggingFaceModel" placeholder="e.g., sentence-transformers/all-MiniLM-L6-v2">
                                    </div>
                                </div>
                                <!-- Other embedding model options here -->
                            </ul>
                        </li>
                    </ul>
                </div>
            </div> 

            <div class="col-md-6 mt-3">
                <h6 class="h6">Vector DB</h6>
                    <div class="form-group form-check mx-3">
                        <input type="radio" class="form-check-input" name="vectorDB" id="chromaDB" checked>
                        <label class="form-check-label" for="chromaDB">Chroma DB</label>
                    </div>
                    <div class="form-group form-check mx-3">
                        <input type="radio" class="form-check-input" name="vectorDB" id="faissDB" unchecked>
                        <label class="form-check-label" for="faissDB">FAISS DB</label>
                    </div>
                    <div class="form-group form-check mx-3">
                        <input type="radio" class="form-check-input" name="vectorDB" id="singleStoreDB" unchecked>
                        <label class="form-check-label" for="singleStoreDB">Singlestore DB</label>
                    </div>
                    <div class="form-group form-check mx-3">
                        <input type="radio" class="form-check-input" name="vectorDB" id="pineconeDB" unchecked>
                        <label class="form-check-label" for="pineconeDB">Pinecone DB</label>
                    </div>
            </div>

            <div class="col-md-6 mt-3">
                <div class="treeview treeview-primary" data-mdb-selectable="true">
                    <ul role="tree">
                        <li aria-level="1" role="tree-item">
                            <a class="treeview-category h6" data-mdb-collapse-init data-mdb-target="#retriever-opts" role="button" aria-expanded="true">
                                <i class="fas fa-angle-right chevron-icon mx-1"></i>
                                <input type="checkbox" class="mx-1 form-check-input" id="retriever" checked>
                                Retriever
                            </a>
                            <ul class="collapse show" id="retriever-opts" role="group">
                                <li aria-level="2" role="tree-item" class="treeview-category">
                                    <input type="checkbox" class="mx-1 form-check-input" id="vectorSimilarity" checked> Vector DB - Similarity Search
                                </li>
                                <li aria-level="2" role="tree-item" class="treeview-category">
                                    <input type="checkbox" class="mx-1 form-check-input" id="vectorMMR" checked> Vector DB - MMR
                                </li>
                                <li aria-level="2" role="tree-item" class="treeview-category">
                                    <input type="checkbox" class="mx-1 form-check-input" id="bm25Retriever" checked> BM25 Retriever
                                </li>
                                <li aria-level="2" role="tree-item" class="treeview-category">
                                    <input type="checkbox" class="mx-1 form-check-input" id="multiQuery" checked> Multi Query Retriever
                                </li>
                                <li aria-level="2" role="tree-item" class="treeview-category">
                                    <input type="checkbox" class="mx-1 form-check-input" id="parentDocFullDoc" checked> Parent Document Retriever - Full Documents
                                </li>
                                <li aria-level="2" role="tree-item" class="treeview-category">
                                    <input type="checkbox" class="mx-1 form-check-input" id="parentDocLargeChunk" checked> Parent Document Retriever - Large Chunks
                                </li>
                            </ul>
                        </li>
                    </ul>
                </div>
            </div>

            <div class="col-md-6 mt-3">
                <div class="treeview treeview-primary" data-mdb-selectable="true">
                    <ul role="tree">
                        <li aria-level="1" role="tree-item">
                            <a class="treeview-category h6" data-mdb-collapse-init data-mdb-target="#top-k" role="button" aria-expanded="true">
                                <i class="fas fa-angle-right chevron-icon mx-1"></i>
                                <input type="checkbox" class="mx-1 form-check-input" id="topk">
                                Top k
                            </a>
                            <ul class="collapse show" id="top-k" role="group">
                                <li aria-level="2" role="tree-item" class="treeview-category">
                                    <input type="checkbox" class="mx-1 form-check-input" id="topK5" checked> 5
                                </li>
                                <li aria-level="2" role="tree-item" class="treeview-category">
                                    <input type="checkbox" class="mx-1 form-check-input" id="topK10" unchecked> 10
                                </li>
                                <li aria-level="2" role="tree-item" class="treeview-category">
                                    <input type="checkbox" class="mx-1 form-check-input" id="topK20" unchecked> 20
                                </li>
                            </ul>
                        </li>
                    </ul>
                </div>
            </div>

            <div class="col-md-6 mt-3">
                <div class="treeview treeview-primary" data-mdb-selectable="true">
                    <ul role="tree">
                        <li aria-level="1" role="tree-item">
                            <a class="treeview-category h6" data-mdb-collapse-init data-mdb-target="#compression-opts" role="button" aria-expanded="true">
                                <i class="fas fa-angle-right chevron-icon mx-1"></i>
                                <input type="checkbox" class="mx-1 form-check-input" id="compression">
                                Compression
                            </a>
                            <ul class="collapse show" id="compression-opts" role="group">
                                <li aria-level="2" role="tree-item" class="treeview-category">
                                    <input type="checkbox" class="mx-1 form-check-input" id="contextualCompression" checked> Contextual Compression
                                </li>
                                <li aria-level="2" role="tree-item" class="treeview-category">
                                    <input type="checkbox" class="mx-3 form-check-input" id="longContextReorder" checked> Long Context Reorder
                                </li>
                                <li aria-level="2" role="tree-item" class="treeview-category">
                                    <input type="checkbox" class="mx-3 form-check-input" id="crossEncoderReranker" checked> Cross Encoder Re-ranker
                                </li>
                                <li aria-level="2" role="tree-item" class="treeview-category">
                                    <input type="checkbox" class="mx-3 form-check-input" id="embeddingsRedundantFilter" unchecked> Embedding Redundant Filter
                                </li>
                                <li aria-level="2" role="tree-item" class="treeview-category">
                                    <input type="checkbox" class="mx-3 form-check-input" id="embeddingsClusteringFilter" unchecked> Embedding Clustering Filter
                                </li>
                                <li aria-level="2" role="tree-item" class="treeview-category">
                                    <input type="checkbox" class="mx-3 form-check-input" id="llmChainFilter" unchecked> LLM Chain Filter
                                </li>
                            </ul>
                        </li>
                    </ul>
                </div>
            </div>

            <div class="col-md-6 mt-3">
                <div class="treeview treeview-primary" data-mdb-selectable="true">
                    <ul role="tree">
                        <li aria-level="1" role="tree-item">
                            <a class="treeview-category h6" data-mdb-collapse-init data-mdb-target="#llm-opts" role="button" aria-expanded="true">
                                <i class="fas fa-angle-right chevron-icon mx-1"></i>
                                <input type="checkbox" class="mx-1 form-check-input h6" id="llm">
                                LLM
                            </a>
                            <ul class="collapse show" id="llm-opts" role="group">
                                <li aria-level="2" role="tree-item">
                                    <a class="treeview-category d-flex align-items-center" data-mdb-collapse-init data-mdb-target="#openai-llms" role="button" aria-expanded="true">
                                        <i class="fas fa-angle-right chevron-icon mx-1"></i>
                                        <input type="checkbox" class="mx-1 form-check-input" id="openAIllms">
                                        OpenAI
                                    </a>
                                    <ul class="collapse show" id="openai-llms" role="group">
                                        <li aria-level="3" role="tree-item" class="treeview-category">
                                            <input type="checkbox" class="mx-1 form-check-input" id="gpt35" checked> GPT-3.5 Turbo
                                        </li>
                                        <li aria-level="3" role="tree-item" class="treeview-category">
                                            <input type="checkbox" class="mx-1 form-check-input" id="gpt4o" unchecked> GPT-4o
                                        </li>
                                        <li aria-level="3" role="tree-item" class="treeview-category">
                                            <input type="checkbox" class="mx-1 form-check-input" id="gpt4Turbo" unchecked> GPT-4 Turbo
                                        </li>
                                    </ul>
                                </li>
                                <li aria-level="2" role="tree-item" class="treeview-category mx-3">
                                    <input type="checkbox" class="mx-1 form-check-input" id="llmHuggingFace" unchecked> HuggingFace
                                </li>
                                <div class="form-group row mx-2" id="llmHuggingFaceModelDiv" style="display: none;">
                                    <label for="llmHuggingFaceModel" class="col-sm-2 col-form-label">Model:</label>
                                    <div class="col-sm-10">
                                        <input type="text" class="form-control" id="llmHuggingFaceModel" placeholder="e.g., meta-llama/Meta-Llama-3.1-405B">
                                    </div>
                                </div>
                                <!-- Other embedding model options here -->
                            </ul>
                        </li>
                    </ul>
                </div>
            </div> 

            <!--                <h6 class="mt-4">LLM</h6>
                                <div class="form-group form-check form-switch mx-3">
                                    <input type="checkbox" class="form-check-input" id="gpt35" checked>
                                    <label class="form-check-label" for="gpt35">GPT-3.5 Turbo</label>
                                </div>
                                <div class="form-group form-check form-switch mx-3">
                                    <input type="checkbox" class="form-check-input" id="gpt4o" unchecked>
                                    <label class="form-check-label" for="gpt4o">GPT-4o</label>
                                </div>
                                <div class="form-group form-check form-switch mx-3">
                                    <input type="checkbox" class="form-check-input" id="gpt4Turbo" unchecked>
                                    <label class="form-check-label" for="gpt4Turbo">GPT-4 Turbo</label>
                                </div>
                                <div class="form-group form-check form-switch mx-3">
                                    <input type="checkbox" class="form-check-input" id="llmHuggingFace">
                                    <label class="form-check-label" for="llmHuggingFace">HuggingFace</label>
                                </div>
                                <div class="form-group row mx-3" id="llmHuggingFaceModelDiv" style="display: none;">
                                    <label for="llmHuggingFaceModel" class="col-sm-2 col-form-label">Model Name:</label>
                                    <div class="col-sm-10">
                                        <input type="text" class="form-control" id="llmHuggingFaceModel" placeholder="e.g., meta-llama/Meta-Llama-3.1-405B">
                                    </div>
                                </div> -->


        </div> 
      
     </div>
   </div>

    <script src="https://code.jquery.com/jquery-3.6.0.min.js"></script>
    <script src="https://cdn.jsdelivr.net/npm/bootstrap@5.3.3/dist/js/bootstrap.bundle.min.js" integrity="sha384-YvpcrYf0tY3lHB60NNkmXc5s9fDVZLESaAA55NDzOxhy9GkcIdslK1eN7N6jIeHz" crossorigin="anonymous"></script>
    <script src="https://cdn.jsdelivr.net/npm/@popperjs/core@2.11.8/dist/umd/popper.min.js" integrity="sha384-I7E8VVD/ismYTF4hNIPjVp/Zjvgyol6VFvRkX/vR+Vc4jQkC+hVqc2pM8ODewa9r" crossorigin="anonymous"></script>
    <script src="https://cdn.jsdelivr.net/npm/bootstrap@5.3.3/dist/js/bootstrap.min.js" integrity="sha384-0pUGZvbkm6XF6gxjEnlmuGrJXVbNuzT9qBBavbLwCsOGabYfZo0T0to5eqruptLy" crossorigin="anonymous"></script>
        <script src="https://cdnjs.cloudflare.com/ajax/libs/noUiSlider/15.8.1/nouislider.min.js"></script>
    <!-- MDB -->
    <script type="text/javascript" src="https://cdnjs.cloudflare.com/ajax/libs/mdb-ui-kit/7.3.2/mdb.min.js"></script>
    <script type="text/javascript">
    $(document).ready(function () {
      
    document.querySelectorAll('[data-mdb-toggle="collapse"]').forEach(element => {
        new mdb.Collapse(element);
    });

    // Handle parent checkbox selection
    $('.treeview-category > input[type="checkbox"]').change(function () {
        var isChecked = $(this).prop('checked');
        $(this).closest('li').find('input[type="checkbox"]').prop('checked', isChecked);
    });

    // Handle child checkbox selection
    $('.treeview-category li input[type="checkbox"]').change(function () {
        var allSiblings = $(this).closest('ul').find('> li > input[type="checkbox"]');
        var allChecked = allSiblings.length === allSiblings.filter(':checked').length;
        var parentCheckbox = $(this).closest('ul').siblings('input[type="checkbox"]');
        parentCheckbox.prop('checked', allChecked);
    });

    // Handle chevron icon toggle and collapse/expand
    $('.treeview-category > .chevron-icon').click(function () {
        var $this = $(this);
        var target = $this.closest('a').data('mdb-target');
        $(target).collapse('toggle');
        $this.closest('a').attr('aria-expanded', function (index, attr) {
            return attr === 'true' ? 'false' : 'true';
        });
        $this.closest('a').toggleClass('collapsed');
    });

    // Initialize noUiSlider
    const slider = document.getElementById('multi-ranges-basic');
    noUiSlider.create(slider, {
        start: [500, 2000],
        connect: [false, true, false],
        range: {
            'min': 100,
            'max': 5000
        },
        step: 100,
        // tooltips: true,
        format: {
            to: function (value) {
                return Math.round(value);
            },
            from: function (value) {
                return Number(value);
            }
        }
    });

    slider.noUiSlider.on('update', function (values, handle) {
        document.getElementById('minValue').innerText = values[0];
        document.getElementById('maxValue').innerText = values[1];
    });
    
    slider.noUiSlider.on('start', function (values, handle, unencoded, tap, positions) {
        const tooltip = document.createElement('div');
        tooltip.className = 'noUi-tooltip';
        tooltip.innerHTML = values[handle];
        slider.querySelectorAll('.noUi-handle')[handle].appendChild(tooltip);
    });

    slider.noUiSlider.on('slide', function (values, handle) {
        const handleEl = slider.querySelectorAll('.noUi-handle')[handle];
        handleEl.querySelector('.noUi-tooltip').innerHTML = values[handle];
    });

    slider.noUiSlider.on('end', function (values, handle) {
        const handleEl = slider.querySelectorAll('.noUi-handle')[handle];
        const tooltip = handleEl.querySelector('.noUi-tooltip');
        if (tooltip) {
            tooltip.remove();
        }
    });

    $('#embeddingHuggingFace').change(function () {
        if (this.checked) {
            $('#embeddingHuggingFaceModelDiv').show();
        } else {
            $('#embeddingHuggingFaceModelDiv').hide();
            $('#embeddingHuggingFaceModel').val('');
        }
    });

    $('#llmHuggingFace').change(function () {
        if (this.checked) {
            $('#llmHuggingFaceModelDiv').show();
        } else {
            $('#llmHuggingFaceModelDiv').hide();
            $('#llmHuggingFaceModel').val('');
        }
    });
});

    </script>
</body>
</html>